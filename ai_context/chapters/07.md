
Chapter VII - Items
ER Diagram
mermaid
Copy Code
erDiagram
    items {
        string item_id PK
        string name
        enum item_type
        enum rarity_level
        enum rank_requirement
        string description
        number weight
        number value_spirit_coins
        boolean is_magical
        boolean is_consumable
    }
    
    armor_items {
        string armor_id PK
        string item_id FK
        enum armor_type
        number defense_rating
        number magical_resistance
        string special_properties
        enum material_type
        boolean covers_full_body
        number durability
    }
    
    weapon_items {
        string weapon_id PK
        string item_id FK
        enum weapon_category
        enum weapon_type
        number damage_rating
        number accuracy_bonus
        number range_meters
        string damage_type
        string special_abilities
        boolean is_summoned
        number durability
    }
    
    spirit_coins {
        string coin_id PK
        enum coin_type
        number denomination
        string description
        boolean is_currency
        boolean has_magical_properties
    }
    
    character_inventory {
        string inventory_id PK
        string character_id FK
        string item_id FK
        number quantity
        boolean is_equipped
        enum equipment_slot
        string customizations
        number condition_percentage
    }
    
    equipment_slots {
        string slot_id PK
        string slot_name
        enum slot_type
        boolean allows_multiple
        string restrictions
    }
    
    weapon_categories {
        string category_id PK
        string name
        string description
        enum required_attribute
        string usage_style
    }
    
    armor_types {
        string type_id PK
        string name
        number base_protection
        number mobility_penalty
        string coverage_areas
    }
    
    items ||--o{ armor_items : "armor_details"
    items ||--o{ weapon_items : "weapon_details"
    items ||--o{ character_inventory : "owned_by"
    equipment_slots ||--o{ character_inventory : "equipped_in"
    weapon_categories ||--o{ weapon_items : "categorized_as"
    armor_types ||--o{ armor_items : "typed_as"
Gameplay Flowchart
mermaid
Copy Code
flowchart TD
    A[Character Creation/Adventure] --> B{Find/Purchase Item?}
    B -->|Yes| C[Identify Item Type]
    B -->|No| D[Continue Adventure]
    C --> E{Item Type?}
    E -->|Armor| F[Check Armor Properties]
    E -->|Weapon| G[Check Weapon Properties]
    E -->|Spirit Coins| H[Add to Currency]
    E -->|Other| I[Add to Inventory]
    F --> J{Better than Current Armor?}
    J -->|Yes| K[Equip New Armor]
    J -->|No| L[Store in Inventory]
    G --> M{Weapon Category?}
    M -->|Melee| N[Check Damage/Accuracy]
    M -->|Ranged| O[Check Range/Damage]
    M -->|Magical| P[Check Special Abilities]
    N --> Q{Better than Current Weapon?}
    O --> Q
    P --> Q
    Q -->|Yes| R[Equip New Weapon]
    Q -->|No| S[Store in Inventory]
    K --> T[Update Defense Stats]
    R --> U[Update Attack Stats]
    T --> V[Apply Armor Bonuses]
    U --> W[Apply Weapon Bonuses]
    V --> X[Check Equipment Synergies]
    W --> X
    X --> Y{Magical Properties?}
    Y -->|Yes| Z[Activate Special Effects]
    Y -->|No| AA[Standard Equipment]
    Z --> BB[Apply Magical Bonuses]
    AA --> CC[Apply Base Stats]
    BB --> DD[Update Character Sheet]
    CC --> DD
    DD --> EE{Item Durability Check}
    EE -->|Damaged| FF[Repair or Replace]
    EE -->|Good Condition| GG[Continue Using]
    FF --> HH[Find Repair Services]
    HH --> II[Pay Repair Costs]
    II --> GG
    GG --> JJ[Combat/Adventure Usage]
    JJ --> KK{Item Breaks/Degrades?}
    KK -->|Yes| LL[Remove from Equipment]
    KK -->|No| MM[Continue Adventure]
    LL --> NN[Need Replacement]
    NN --> B
    MM --> D
    H --> OO[Update Currency Total]
    I --> PP[Manage Inventory Space]
    L --> PP
    S --> PP
    PP --> D
    OO --> D
    D --> QQ{Need Equipment?}
    QQ -->|Yes| B
    QQ -->|No| RR[End Equipment Phase]
TypeScript Enums & Constants
typescript
Copy Code
enum ItemType {
  ARMOR = "armor",
  WEAPON = "weapon",
  CONSUMABLE = "consumable",
  TOOL = "tool",
  CURRENCY = "currency",
  MATERIAL = "material",
  ACCESSORY = "accessory",
  MAGICAL_ITEM = "magical_item"
}

enum ArmorType {
  LIGHT_ARMOR = "light_armor",
  MEDIUM_ARMOR = "medium_armor", 
  HEAVY_ARMOR = "heavy_armor",
  ROBES = "robes",
  NATURAL_ARMOR = "natural_armor",
  MAGICAL_PROTECTION = "magical_protection"
}

enum WeaponCategory {
  MELEE = "melee",
  RANGED = "ranged",
  MAGICAL = "magical",
  SUMMONED = "summoned",
  IMPROVISED = "improvised"
}

enum WeaponType {
  SWORD = "sword",
  AXE = "axe",
  SPEAR = "spear",
  BOW = "bow",
  CROSSBOW = "crossbow",
  STAFF = "staff",
  WAND = "wand",
  DAGGER = "dagger",
  HAMMER = "hammer",
  WHIP = "whip",
  CLAW = "claw",
  FIST = "fist"
}

enum SpiritCoinType {
  IRON_SPIRIT_COIN = "iron_spirit_coin",
  BRONZE_SPIRIT_COIN = "bronze_spirit_coin",
  SILVER_SPIRIT_COIN = "silver_spirit_coin",
  GOLD_SPIRIT_COIN = "gold_spirit_coin",
  DIAMOND_SPIRIT_COIN = "diamond_spirit_coin"
}

enum EquipmentSlot {
  HEAD = "head",
  CHEST = "chest",
  LEGS = "legs",
  FEET = "feet",
  HANDS = "hands",
  MAIN_HAND = "main_hand",
  OFF_HAND = "off_hand",
  RING_1 = "ring_1",
  RING_2 = "ring_2",
  NECK = "neck",
  BACK = "back"
}

enum MaterialType {
  LEATHER = "leather",
  CLOTH = "cloth",
  CHAIN_MAIL = "chain_mail",
  PLATE = "plate",
  SCALE = "scale",
  MAGICAL_FABRIC = "magical_fabric",
  NATURAL = "natural",
  CRYSTALLINE = "crystalline"
}

const WEAPON_SKILL_CATEGORIES = {
  UNSKILLED: { accuracy: -2, damage: -1, description: "No training with weapon type" },
  BASIC: { accuracy: 0, damage: 0, description: "Basic competency" },
  SKILLED: { accuracy: +1, damage: +1, description: "Trained proficiency" },
  EXPERT: { accuracy: +2, damage: +2, description: "Master-level skill" },
  LEGENDARY: { accuracy: +3, damage: +3, description: "Legendary expertise" }
} as const;

const SPIRIT_COIN_VALUES = {
  [SpiritCoinType.IRON_SPIRIT_COIN]: 1,
  [SpiritCoinType.BRONZE_SPIRIT_COIN]: 100,
  [SpiritCoinType.SILVER_SPIRIT_COIN]: 10000,
  [SpiritCoinType.GOLD_SPIRIT_COIN]: 1000000,
  [SpiritCoinType.DIAMOND_SPIRIT_COIN]: 100000000
} as const;

const DURABILITY_SYSTEM = {
  MAX_DURABILITY: 100,
  REPAIR_THRESHOLD: 25,
  BREAK_THRESHOLD: 0,
  DEGRADATION_RATE: "Varies by usage and item quality"
} as const;
Explanatory Notes
• Armor provides defense rating and magical resistance, with different types offering varying protection levels
• Weapons are categorized by type and skill level, with accuracy and damage bonuses based on proficiency
• Four weapon skill categories: Unskilled (-2 accuracy, -1 damage) to Expert (+2 accuracy, +2 damage)
• Spirit coins serve as currency with exponential value increases between ranks
• Equipment has durability that degrades with use and can be repaired or replaced
• Magical items may have special properties beyond basic stat bonuses
• Characters have multiple equipment slots for different types of gear
• Weight and inventory management affects character mobility and carrying capacity
• Items can be customized or enhanced through various means
• Equipment synergies may provide additional bonuses when items work together
